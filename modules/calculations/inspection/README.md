/**
 * Путь: /modules/calculations/inspection/README.md
 * Назначение: Документация расчётного модуля
 */

# Расчётный модуль: Обследования промышленных зданий

## Описание

Модуль выполняет расчёт стоимости инженерных обследований строительных конструкций промышленных зданий **строго по СЦИ РК 8.03-04-2025, Раздел 4**.

## Соответствие нормативам

✅ **Таблицы цен (импортированы полностью):**
- 1604-0301-01 — Одноэтажные, I категория (15 позиций)
- 1604-0302-01 — Одноэтажные, II категория (15 позиций)
- 1604-0303-01 — Одноэтажные, III категория (15 позиций)
- 1604-0304-01 — Многоэтажные, I категория (9 позиций)
- 1604-0305-01 — Многоэтажные, II категория (9 позиций)
- 1604-0306-01 — Многоэтажные, III категория (9 позиций)

**Всего:** 72 ценовые позиции

✅ **Коэффициенты (реализованы полностью):**
- Таблица 1: Шаг несущих конструкций (4 коэффициента)
- Таблица 2: Сложные условия выполнения работ (9 коэффициентов)
- Таблица 3: Малые объёмы работ (9 диапазонов)

**Всего:** 22 коэффициента

## Использование
```typescript
import { calculateIndustrialInspection } from '@/modules/calculations/inspection/industrial';

const result = await calculateIndustrialInspection({
  buildingCategory: 'I',
  floors: 1,
  heightCategory: 'до 4.5м',
  volume: 1000,
  workComplexity: 'II',
  isWinterConditions: true,
  seismicity: 8
});

console.log('Итоговая стоимость:', result.totalCost, '₸');
```

## Параметры

### Обязательные параметры

| Параметр | Тип | Описание |
|----------|-----|----------|
| `buildingCategory` | `'I' \| 'II' \| 'III'` | Категория сложности здания |
| `floors` | `number` | Этажность (1 = одноэтажное, >1 = многоэтажное) |
| `heightCategory` | `string` | Категория высоты здания/этажа |
| `volume` | `number` | Строительный объём, м³ |
| `workComplexity` | `'I' \| 'II' \| 'III'` | Категория сложности работ |

### Опциональные параметры (коэффициенты)

| Параметр | Тип | Коэффициент | Источник |
|----------|-----|-------------|----------|
| `hasDifficultSoils` | `boolean` | 1.20 | Табл. 2, п.1 |
| `hasHazardousEquipment` | `boolean` | 1.15 | Табл. 2, п.2 |
| `isWinterConditions` | `boolean` | 1.25 | Табл. 2, п.3 |
| `afterEarthquake` | `boolean` | 1.20 | Табл. 2, п.4 |
| `seismicity` | `7\|8\|9\|10` | 1.20-1.50 | Табл. 2, п.5 |
| `hasHotWorkshops` | `boolean` | 1.25 | Табл. 2, п.6 |
| `isHeritageMonument` | `boolean` | 1.20 | Табл. 2, п.7 |
| `requiresReinforcement` | `boolean` | 1.10 | Табл. 2, п.8 |
| `hasUndergroundPart` | `boolean` | 1.30 | Табл. 2, п.9 |
| `structureSpacing` | `string` | 1.00-1.15 | Табл. 1 |

## Формула расчёта
```
Итоговая стоимость = Базовая цена × (Объём / 100) × Коэффициент₁ × ... × Коэффициентₙ
```

**Важно:** Коэффициенты **перемножаются**, а не складываются (согласно п.10 СЦИ РК).

## Категории высоты

### Для одноэтажных зданий:
- `до 4.5м`
- `от 4.5 до 6м`
- `от 6 до 8м`
- `от 8 до 10м`
- `свыше 10м`

### Для многоэтажных зданий:
- `до 4.5м`
- `от 4.5 до 6м`
- `свыше 7.2м`

## Тестирование

Запуск тестов:
```bash
npm run test:calculations
```

Тесты проверяют:
- ✅ Базовые расчёты
- ✅ Коэффициент малого объёма
- ✅ Множественные коэффициенты
- ✅ Многоэтажные здания
- ✅ Комплексные расчёты
- ✅ Граничные значения

## Примеры

### Пример 1: Простое здание
```typescript
const result = await calculateIndustrialInspection({
  buildingCategory: 'I',
  floors: 1,
  heightCategory: 'до 4.5м',
  volume: 1000,
  workComplexity: 'I'
});

// Результат:
// Базовая цена: 3,893 ₸
// Количество: 10 единиц
// Итого: 38,930 ₸
```

### Пример 2: С коэффициентами
```typescript
const result = await calculateIndustrialInspection({
  buildingCategory: 'II',
  floors: 1,
  heightCategory: 'от 4.5 до 6м',
  volume: 500, // Малый объём → коэффициент 2.8
  workComplexity: 'II',
  isWinterConditions: true, // × 1.25
  seismicity: 8 // × 1.30
});

// Результат:
// Базовая цена: 19,889 ₸
// Коэффициенты: 2.8 × 1.25 × 1.30 = 4.55
// Количество: 5 единиц
// Итого: 452,547 ₸
```

## Версии

- **v1.0** (старая) — Заглушка с неполными данными
- **v2.0** (текущая) — Полная реализация по СЦИ РК 8.03-04-2025

## Автор

SmartEstimate Team, 2025
